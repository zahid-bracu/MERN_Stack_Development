<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <!-- post data -->
    <form action="/addProduct" method="post">
        
        <input type="text" name="name" placeholder="Enter Name"/>

        <input type="text" name="email" placeholder="Enter Mail"/>

        <input type="submit" />
        
    </form>

    <div id="info">

    </div>
   

    <script>

      
        // get data
        fetch('http://localhost:3002/products')
            .then(response => response.json())
            .then(json => load(json));


            function load(data){
                console.log(data);
                data.forEach(element => {
                    var elem=document.createElement('p');
                    elem.innerHTML=`<span>${element.name} : ${element.email}</span> <button onclick="deleteItem('${element._id}')">Remove</button>`;
                    document.getElementById('info').appendChild(elem);
                });
                
            }


            // delete data
            function deleteItem(id){
                fetch(`/delete/${id}`,{
                    method: 'DELETE'
                })
                .then(res=>res.json())
                .then(result=>{
                    console.log("Deleted");
                })
            }
    </script>
</body>
</html>